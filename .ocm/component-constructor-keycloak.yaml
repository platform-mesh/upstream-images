components:
  - name: {{ .COMPONENT_NAME }}
    version: {{ .IMAGE_VERSION }}
    provider:
      name: The platform-mesh Team
    resources:
      - name: chart
        type: helmChart
        relation: external
        version: {{ .CHART_VERSION }}
        access:
          type: ociArtifact
          imageReference: "{{ .CHART_OCI_PATH }}:{{ .CHART_VERSION }}"
      - name: image
        type: ociImage
        relation: external
        version: {{ .IMAGE_TAG }}
        access:
          type: ociArtifact
          imageReference: "{{ .IMAGE_NAME }}:{{ .IMAGE_TAG }}"
      - name: postgresql-image
        type: ociImage
        relation: external
        version: {{ .KEYCLOAK_POSTGRESQL_IMAGE_VERSION }}
        access:
          type: ociArtifact
          imageReference: "ghcr.io/platform-mesh/upstream-images/postgresql:{{ .KEYCLOAK_POSTGRESQL_IMAGE_VERSION }}"
    sources:
      - name: source
        type: git
        version: {{ .IMAGE_VERSION }}
        access:
          commit: {{ .IMAGE_SOURCE_COMMIT }}
          repoUrl: https://github.com/bitnami/containers
          type: gitHub
      - name: chart
        type: git
        version: {{ .CHART_VERSION }}
        access:
          commit: {{ .CHART_SOURCE_COMMIT }}
          repoUrl: https://github.com/bitnami/charts
          type: gitHub
